---
title: 'Enable the CC Web Pixel'
description: 'Install the CreatorCommerce web pixel for accurate attribution tracking, conversion events, and affiliate performance measurement.'
---

## Overview

The CC Web Pixel tracks:

- **Page views** on creator landing pages
- **Add to cart** events with creator context
- **Checkout** events and completion
- **Order attribution** to specific creators
- **Customer journey** across sessions

---

## Installation Methods

### Method 1: Shopify Web Pixel (Recommended)

The Shopify Customer Events system provides the most reliable tracking.

**In Shopify Admin:**

1. Go to Settings → Customer Events
2. Click "Add custom pixel"
3. Name it "CreatorCommerce Pixel"
4. Paste the pixel code below

```javascript
// CreatorCommerce Web Pixel
const CC_PIXEL_ID = 'YOUR_CC_PIXEL_ID';

// Initialize
analytics.subscribe('page_viewed', async (event) => {
  const url = new URL(event.context.document.location.href);
  const creatorHandle = url.searchParams.get('ref') || 
                        getCreatorFromPath(url.pathname);
  
  if (creatorHandle) {
    // Store creator context
    localStorage.setItem('cc_creator_handle', creatorHandle);
    localStorage.setItem('cc_landing_time', Date.now().toString());
    
    // Track landing
    await sendCCEvent('landing', {
      creator_handle: creatorHandle,
      landing_url: url.href,
      referrer: event.context.document.referrer
    });
  }
});

analytics.subscribe('product_viewed', async (event) => {
  const creatorHandle = localStorage.getItem('cc_creator_handle');
  if (!creatorHandle) return;
  
  await sendCCEvent('product_view', {
    creator_handle: creatorHandle,
    product_id: event.data.productVariant.product.id,
    product_title: event.data.productVariant.product.title,
    variant_id: event.data.productVariant.id
  });
});

analytics.subscribe('product_added_to_cart', async (event) => {
  const creatorHandle = localStorage.getItem('cc_creator_handle');
  if (!creatorHandle) return;
  
  await sendCCEvent('add_to_cart', {
    creator_handle: creatorHandle,
    product_id: event.data.cartLine.merchandise.product.id,
    variant_id: event.data.cartLine.merchandise.id,
    quantity: event.data.cartLine.quantity,
    price: event.data.cartLine.cost.totalAmount.amount
  });
});

analytics.subscribe('checkout_started', async (event) => {
  const creatorHandle = localStorage.getItem('cc_creator_handle');
  if (!creatorHandle) return;
  
  await sendCCEvent('checkout_start', {
    creator_handle: creatorHandle,
    checkout_token: event.data.checkout.token,
    total: event.data.checkout.totalPrice.amount,
    item_count: event.data.checkout.lineItems.length
  });
});

analytics.subscribe('checkout_completed', async (event) => {
  const creatorHandle = localStorage.getItem('cc_creator_handle');
  if (!creatorHandle) return;
  
  await sendCCEvent('purchase', {
    creator_handle: creatorHandle,
    order_id: event.data.checkout.order.id,
    total: event.data.checkout.totalPrice.amount,
    discount_code: event.data.checkout.discountApplications[0]?.title,
    items: event.data.checkout.lineItems.map(item => ({
      product_id: item.variant.product.id,
      variant_id: item.variant.id,
      quantity: item.quantity,
      price: item.finalLinePrice.amount
    }))
  });
  
  // Clear creator context after purchase
  localStorage.removeItem('cc_creator_handle');
});

// Helper functions
function getCreatorFromPath(pathname) {
  const match = pathname.match(/\/creators?\/([^\/]+)/);
  return match ? match[1] : null;
}

async function sendCCEvent(eventType, data) {
  try {
    await fetch(`https://api.creatorcommerce.com/v1/events/${CC_PIXEL_ID}`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        event: eventType,
        timestamp: new Date().toISOString(),
        session_id: getSessionId(),
        ...data
      }),
      keepalive: true
    });
  } catch (error) {
    console.warn('CC Pixel error:', error);
  }
}

function getSessionId() {
  let sessionId = sessionStorage.getItem('cc_session_id');
  if (!sessionId) {
    sessionId = 'sess_' + Math.random().toString(36).substr(2, 9);
    sessionStorage.setItem('cc_session_id', sessionId);
  }
  return sessionId;
}
```

### Method 2: Theme Integration

Add to your theme's `theme.liquid` before `</head>`:

```liquid
{% comment %} CC Web Pixel - Theme Integration {% endcomment %}
<script>
(function() {
  const CC_PIXEL_ID = 'YOUR_CC_PIXEL_ID';
  
  // Get creator context
  const ccCreatorHandle = {{ cart.attributes['cc-creator-handle'] | json }} || 
                          localStorage.getItem('cc_creator_handle');
  
  if (!ccCreatorHandle) return;
  
  // Track page view
  window.ccTrack = function(event, data) {
    fetch(`https://api.creatorcommerce.com/v1/events/${CC_PIXEL_ID}`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        event: event,
        creator_handle: ccCreatorHandle,
        timestamp: new Date().toISOString(),
        url: window.location.href,
        ...data
      }),
      keepalive: true
    }).catch(() => {});
  };
  
  // Auto-track page view
  window.ccTrack('page_view', {
    page_type: {{ template.name | json }}
  });
})();
</script>
```

---

## Event Types Reference

### Standard Events

| Event | Trigger | Key Data |
|-------|---------|----------|
| `landing` | First visit with creator context | `creator_handle`, `landing_url`, `referrer` |
| `page_view` | Any page view with context | `page_type`, `url` |
| `product_view` | Product page view | `product_id`, `variant_id` |
| `add_to_cart` | Item added to cart | `product_id`, `quantity`, `price` |
| `checkout_start` | Checkout initiated | `checkout_token`, `total`, `item_count` |
| `purchase` | Order completed | `order_id`, `total`, `discount_code`, `items` |

### Custom Events

Track custom interactions:

```javascript
// Track creator bio expansion
window.ccTrack('engagement', {
  action: 'bio_expand',
  creator_handle: creatorHandle
});

// Track product recommendation click
window.ccTrack('engagement', {
  action: 'recommendation_click',
  product_id: productId,
  position: index
});

// Track discount code copy
window.ccTrack('engagement', {
  action: 'discount_copy',
  discount_code: discountCode
});
```

---

## Attribution Window

### Setting Attribution Duration

```javascript
// In pixel configuration
const ATTRIBUTION_WINDOW = 30 * 24 * 60 * 60 * 1000; // 30 days

function setCreatorContext(creatorHandle) {
  localStorage.setItem('cc_creator_handle', creatorHandle);
  localStorage.setItem('cc_attribution_expires', 
    (Date.now() + ATTRIBUTION_WINDOW).toString()
  );
}

function getCreatorContext() {
  const expires = parseInt(localStorage.getItem('cc_attribution_expires') || '0');
  if (Date.now() > expires) {
    localStorage.removeItem('cc_creator_handle');
    localStorage.removeItem('cc_attribution_expires');
    return null;
  }
  return localStorage.getItem('cc_creator_handle');
}
```

### Last-Touch vs First-Touch

```javascript
// Last-touch attribution (default)
function updateCreatorContext(creatorHandle) {
  setCreatorContext(creatorHandle);
}

// First-touch attribution
function updateCreatorContext(creatorHandle) {
  if (!localStorage.getItem('cc_creator_handle')) {
    setCreatorContext(creatorHandle);
  }
}

// Multi-touch tracking
function updateCreatorContext(creatorHandle) {
  const touchpoints = JSON.parse(localStorage.getItem('cc_touchpoints') || '[]');
  touchpoints.push({
    creator: creatorHandle,
    timestamp: Date.now(),
    url: window.location.href
  });
  localStorage.setItem('cc_touchpoints', JSON.stringify(touchpoints.slice(-10)));
  
  // Set last touch as primary
  setCreatorContext(creatorHandle);
}
```

---

## Cross-Domain Tracking

### Linking Sessions Across Domains

```javascript
// On source domain (creator's site)
function generateCCLink(targetUrl, creatorHandle) {
  const sessionId = getSessionId();
  const url = new URL(targetUrl);
  url.searchParams.set('ref', creatorHandle);
  url.searchParams.set('cc_session', sessionId);
  return url.toString();
}

// On target domain (your Shopify store)
analytics.subscribe('page_viewed', (event) => {
  const url = new URL(event.context.document.location.href);
  const crossSessionId = url.searchParams.get('cc_session');
  
  if (crossSessionId) {
    // Link sessions
    sessionStorage.setItem('cc_session_id', crossSessionId);
  }
});
```

---

## Server-Side Verification

### Webhook for Order Attribution

```javascript
// Webhook handler for order creation
app.post('/webhooks/shopify/order-created', async (req, res) => {
  const order = req.body;
  
  // Check for CC discount code
  const ccDiscount = order.discount_codes.find(dc => 
    dc.code.match(/^[A-Z]+\d+$/) // Pattern: NAME15
  );
  
  if (ccDiscount) {
    // Look up creator by discount code
    const creator = await ccApi.getCreatorByDiscountCode(ccDiscount.code);
    
    if (creator) {
      // Server-side attribution
      await ccApi.attributeOrder({
        orderId: order.id,
        creatorId: creator.id,
        discountCode: ccDiscount.code,
        orderTotal: order.total_price,
        discountAmount: ccDiscount.amount,
        source: 'server_verification'
      });
    }
  }
  
  res.status(200).send('OK');
});
```

---

## Debugging the Pixel

### Debug Mode

```javascript
// Enable debug mode
const CC_DEBUG = true;

function sendCCEvent(eventType, data) {
  if (CC_DEBUG) {
    console.log('[CC Pixel]', eventType, data);
  }
  
  // ... actual send logic
}
```

### Browser Console Testing

```javascript
// In browser console
localStorage.setItem('cc_creator_handle', 'test-creator');

// Verify tracking
window.ccTrack('test_event', { foo: 'bar' });

// Check stored context
console.log('Creator:', localStorage.getItem('cc_creator_handle'));
console.log('Session:', sessionStorage.getItem('cc_session_id'));
```

### Network Tab Verification

1. Open DevTools → Network tab
2. Filter by "creatorcommerce.com"
3. Trigger events (page view, add to cart)
4. Verify request payloads

---

## Privacy Compliance

### GDPR/CCPA Considerations

```javascript
// Check for consent before tracking
function canTrack() {
  // Check for cookie consent
  const consent = getCookieConsent();
  return consent.analytics === true;
}

analytics.subscribe('page_viewed', async (event) => {
  if (!canTrack()) return;
  
  // ... tracking logic
});
```

### Data Collection Notice

```liquid
{% if cc_creator %}
  <p class="cc-privacy-notice">
    By shopping through {{ cc_creator.cc-creator-first-name }}'s page, 
    we track your activity to credit your purchase to them. 
    <a href="/privacy-policy">Learn more</a>
  </p>
{% endif %}
```

---

## Quick Start Checklist

<Checklist>
  - [ ] Get your CC Pixel ID from admin
  - [ ] Install via Shopify Customer Events or theme
  - [ ] Configure attribution window
  - [ ] Set up standard events (landing, product, cart, purchase)
  - [ ] Add custom engagement events
  - [ ] Test with debug mode enabled
  - [ ] Verify in network tab
  - [ ] Set up server-side webhook verification
  - [ ] Add privacy notice
  - [ ] Monitor attribution accuracy
</Checklist>

---

## Related Resources

- [Enable the CC SDK](/guides/dev/enable-cc-sdk) — Full SDK capabilities
- [Create a Collaboration Integration](/guides/dev/create-collaboration-integration) — API integration
- [Going Live & Measuring Success](/guides/collab-strategy/launch-track) — Launch tracking
